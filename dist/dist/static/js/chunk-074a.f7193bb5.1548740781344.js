(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-074a"],{"355X":function(e,t,a){"use strict";a.r(t);var r=a("14Xm"),s=a.n(r),o=a("D3Ub"),l=a.n(o),n=a("7Qib"),i={data:function(){return{q:{userName:"",mobile:"",auditorName:""},tableData:[],page:{total:0,pageSize:10,currentPage:1},queryParams:"",dialogFormVisible:!1,form:{},formLabelWidth:"100px",userGroups:[],formTitle:"",handleUrl:""}},filters:{statusFilter:function(e){switch(e){case 0:return"danger";case 1:return"success";default:return""}},formatStatus:function(e){switch(e){case 0:return"禁用";case 1:return"正常";default:return"-"}},formatType:function(e){switch(e){case-1:return"超管";case 0:return"子超管";case 1:return"普通用户";default:return"-"}}},created:function(){var e=this;setTimeout(function(){e.getUserGroups()},20)},methods:{getUserGroups:function(){var e=this;return l()(s.a.mark(function t(){var a;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e._fetch("/audit/getGroup",{method:"GET"});case 2:200==(a=t.sent).rc?e.userGroups=a.data:console.log(a.msg);case 4:case"end":return t.stop()}},t,e)}))()},query:function(){var e=this;return l()(s.a.mark(function t(){var a;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.queryParams="&userName="+e.q.userName+"&mobile="+e.q.mobile+"&auditorName="+e.q.auditorName,t.next=3,e._fetch("/sysUser/list?limit=10&page=1"+e.queryParams,{method:"GET"});case 3:0===(a=t.sent).code?(e.tableData=a.page.list,e.page.total=a.page.totalCount,e.page.currentPage=a.page.currPage):e.$message(a.msg);case 5:case"end":return t.stop()}},t,e)}))()},reset:function(){this.q={userName:"",mobile:"",auditorName:""}},add:function(e,t){console.log(t),0!=t.status?(this.form.groupId="",this.getInfo(t.userId),this.formTitle="添加",this.handleUrl="/sysUser/add",this.dialogFormVisible=!0):this.$message("该用户已被禁用，无法进行修改")},update:function(e,t){0!=t.status?(this.getInfo(t.userId),this.formTitle="修改",this.handleUrl="/sysUser/update",this.dialogFormVisible=!0):this.$message("该用户已被禁用，无法进行修改")},getInfo:function(e){var t=this;return l()(s.a.mark(function a(){var r;return s.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t._fetch("/sysUser/info/"+e,{method:"GET"});case 2:r=a.sent,console.log(r),r&&(t.form=r.sysUserAudit);case 5:case"end":return a.stop()}},a,t)}))()},handleConfirm:function(){var e=this;return l()(s.a.mark(function t(){var a;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.validator()){t.next=2;break}return t.abrupt("return");case 2:return e.form.auditorName=e.form.userName,t.next=5,e._fetch(e.handleUrl,{method:"POST",body:e.form});case 5:0===(a=t.sent).code?(e.$message("操作成功"),e.query()):e.$message(a.msg),e.dialogFormVisible=!1;case 8:case"end":return t.stop()}},t,e)}))()},handleSizeChange:function(e){var t=this;return l()(s.a.mark(function a(){var r;return s.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t._fetch("/sysUser/list?limit="+e+"&page="+t.page.currentPage+t.queryParams,{method:"GET"});case 2:0===(r=a.sent).code?(t.tableData=r.page.list,t.page.total=r.page.totalCount,t.page.pageSize=e):console.log(r.msg);case 4:case"end":return a.stop()}},a,t)}))()},handleCurrentChange:function(e){var t=this;return l()(s.a.mark(function a(){var r;return s.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t._fetch("/sysUser/list?limit="+t.page.pageSize+"&page="+e+t.queryParams,{method:"GET"});case 2:0===(r=a.sent).code?(t.tableData=r.page.list,t.page.total=r.page.totalCount,t.page.currentPage=e):console.log(r.msg);case 4:case"end":return a.stop()}},a,t)}))()},validator:function(){return Object(n.g)(this.form.userName)?(this.$message("用户名不能为空"),!0):Object(n.g)(this.form.groupId)?(this.$message("所属角色组不能为空"),!0):void 0},rowClass:function(){return"text-align:center"}}},u=(a("LXKz"),a("KHd+")),c=Object(u.a)(i,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"show-box1"},[a("div",{staticClass:"query-box1"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.q}},[a("el-form-item",{attrs:{label:"用户名"}},[a("el-input",{attrs:{placeholder:"请输入用户名"},model:{value:e.q.userName,callback:function(t){e.$set(e.q,"userName","string"==typeof t?t.trim():t)},expression:"q.userName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"手机号"}},[a("el-input",{attrs:{placeholder:"手机号"},model:{value:e.q.mobile,callback:function(t){e.$set(e.q,"mobile","string"==typeof t?t.trim():t)},expression:"q.mobile"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"审批角色名"}},[a("el-input",{attrs:{placeholder:"请输入审批角色名"},model:{value:e.q.auditorName,callback:function(t){e.$set(e.q,"auditorName","string"==typeof t?t.trim():t)},expression:"q.auditorName"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"info"},on:{click:e.query}},[e._v("查询")]),e._v(" "),a("el-button",{attrs:{type:"info"},on:{click:e.reset}},[e._v("重置")])],1)],1)],1),e._v(" "),a("div",{staticClass:"tb-box1"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"","max-height":"700","header-cell-style":e.rowClass}},[a("el-table-column",{attrs:{type:"index",width:"40"}}),e._v(" "),a("el-table-column",{attrs:{prop:"userId",label:"用户ID",align:"left"}}),e._v(" "),a("el-table-column",{attrs:{prop:"userName",label:"用户名",align:"left"}}),e._v(" "),a("el-table-column",{attrs:{prop:"email",label:"邮箱",align:"left",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"mobile",label:"手机号",align:"left"}}),e._v(" "),a("el-table-column",{attrs:{prop:"status",label:"状态",align:"left"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:e._f("statusFilter")(t.row.status)}},[e._v(e._s(e._f("formatStatus")(t.row.status)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"userType",label:"用户类型",align:"left"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("formatType")(t.row.userType)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"auditorName",label:"审批角色名",align:"left","show-overflow-tooltip":!0}}),e._v(" "),a("el-table-column",{attrs:{prop:"auditUserGroup.groupId",label:"审批组ID",align:"left","show-overflow-tooltip":!0}}),e._v(" "),a("el-table-column",{attrs:{prop:"auditUserGroup.groupName",label:"审批组名",align:"left"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"创建时间",align:"center",width:"200"}}),e._v(" "),a("el-table-column",{attrs:{prop:"",label:"操作",align:"center",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.auditorName?a("el-button",{attrs:{size:"mini",type:"warning"},on:{click:function(a){e.update(t.$index,t.row)}}},[e._v("修改")]):a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){e.add(t.$index,t.row)}}},[e._v("新增")])]}}])})],1)],1),e._v(" "),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{"current-page":e.page.currentPage,"page-sizes":[10,30,50],"page-size":e.page.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.page.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:e.formTitle,visible:e.dialogFormVisible,width:"20%",top:"30vh"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{attrs:{model:e.form}},[a("el-form-item",{attrs:{label:"用户名","label-width":e.formLabelWidth}},[a("el-input",{attrs:{placeholder:"用户名",disabled:""},model:{value:e.form.userName,callback:function(t){e.$set(e.form,"userName",t)},expression:"form.userName"}})],1),e._v(" "),e._e(),e._v(" "),a("el-form-item",{attrs:{label:"所属角色组","label-width":e.formLabelWidth}},[a("el-select",{attrs:{placeholder:"请选择所属角色组"},model:{value:e.form.groupId,callback:function(t){e.$set(e.form,"groupId",t)},expression:"form.groupId"}},[a("el-option",{attrs:{value:""}},[e._v("请选择所属角色组")]),e._v(" "),e._l(e.userGroups,function(e){return a("el-option",{key:e.id,attrs:{value:e.id,label:e.name}})})],2)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.handleConfirm}},[e._v("确 定")])],1)],1)],1)},[],!1,null,"58d90a70",null);c.options.__file="index.vue";t.default=c.exports},LXKz:function(e,t,a){"use strict";var r=a("V0H9");a.n(r).a},V0H9:function(e,t,a){}}]);