(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-c3fa"],{Us4v:function(e,t,a){},tFX0:function(e,t,a){"use strict";a.r(t);var n=a("14Xm"),i=a.n(n),s=a("D3Ub"),o=a.n(s),r=a("7Qib"),l={data:function(){return{formInline:{key:""},tableData:[],multipleSelection:[],page:{pageSize:50,total:0,currentPage:1},switchForm:!1,delTip:!1,config:{},panelTitle:"新增参数",selectedList:[],tflag:!1}},created:function(){this.getConfigList(),this.getPidList()},methods:{query:function(){var e=this;return o()(i.a.mark(function t(){var a;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e._fetch("/sys/config/list?limit=50&page=1&key="+e.formInline.key,{method:"GET"});case 2:a=t.sent,e.tableData=a.page.list;case 4:case"end":return t.stop()}},t,e)}))()},clearHandle:function(){this.formInline.key=""},add:function(){this.switchForm=!0,this.panelTitle="新增参数",this.config={},this.config.pid="-1"},getPidList:function(){var e=this;return o()(i.a.mark(function t(){var a;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e._fetch("/sys/config/listPid",{method:"GET"});case 2:a=t.sent,e.selectedList=a.data;case 4:case"end":return t.stop()}},t,e)}))()},update:function(e,t){this.tflag=!0,this.switchForm=!0,this.panelTitle="参数信息更改",this.getConfigInfo(t.id)},getConfigInfo:function(e){var t=this;return o()(i.a.mark(function a(){var n;return i.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t._fetch("/sys/config/info/"+e,{method:"GET"});case 2:n=a.sent,t.config=n.config;case 4:case"end":return a.stop()}},a,t)}))()},del:function(){this.multipleSelection.length<1?this.$message("请选择一条记录"):this.delTip=!0},delConfirm:function(){var e=this;return o()(i.a.mark(function t(){var a;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e._fetch("/sys/config/delete",{method:"POST",body:e.config.ids});case 2:0===(a=t.sent).code?(e.$message("操作成功"),e.getConfigList(),e.delTip=!1):e.$message(a.msg);case 4:case"end":return t.stop()}},t,e)}))()},handleSelectionChange:function(e){var t=this;this.multipleSelection=e,this.config.ids=[],this.multipleSelection.forEach(function(e){t.config.ids.push(e.id)}),this.rowData=this.multipleSelection[0],this.rowData&&(this.config.id=this.rowData.id)},getRowData:function(e){this.$refs.dataTable.toggleRowSelection(e),this.rowData=e,this.config.id=this.rowData.id},onSubmit:function(){if(!this.validator()){var e=null==this.config.id?"/sys/config/save":"/sys/config/update";this.addUser(e)}},addUser:function(e){var t=this;return o()(i.a.mark(function a(){var n;return i.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t._fetch(e,{method:"POST",body:t.config});case 2:0===(n=a.sent).code?(t.$message("操作成功"),t.getConfigList(),t.switchForm=!1):t.$message(n.msg);case 4:case"end":return a.stop()}},a,t)}))()},reback:function(){this.switchForm=!1},getConfigList:function(){var e=this;return o()(i.a.mark(function t(){var a;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e._fetch("/sys/config/list?limit=50&page=1",{method:"GET"});case 2:0===(a=t.sent).code?(e.tableData=a.page.list,e.page.total=a.page.totalCount,e.page.pageSize=a.page.pageSize):e.$message(a.msg);case 4:case"end":return t.stop()}},t,e)}))()},handleSizeChange:function(e){var t=this;return o()(i.a.mark(function a(){var n;return i.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t._fetch("/sys/config/list?limit="+e+"&page="+t.page.currentPage,{method:"GET"});case 2:n=a.sent,t.tableData=n.page.list,t.page.pageSize=e;case 5:case"end":return a.stop()}},a,t)}))()},handleCurrentChange:function(e){var t=this;return o()(i.a.mark(function a(){var n;return i.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t._fetch("/sys/config/list?limit="+t.page.pageSize+"&page="+e,{method:"GET"});case 2:n=a.sent,t.tableData=n.page.list,t.page.currentPage=e;case 5:case"end":return a.stop()}},a,t)}))()},validator:function(){return Object(r.g)(this.config.key)?(this.$message("参数名不能为空"),!0):Object(r.g)(this.config.value)?(this.$message("参数值不能为空"),!0):void 0},rowClass:function(){return"text-align:center"}}},c=(a("uKO6"),a("KHd+")),u=Object(c.a)(l,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page-container"},[a("div",{directives:[{name:"show",rawName:"v-show",value:!e.switchForm,expression:"!switchForm"}],staticClass:"show-box"},[a("div",{staticClass:"query-box"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formInline}},[a("el-form-item",{staticClass:"form-item",attrs:{label:""}},[a("el-input",{attrs:{placeholder:"请输入参数名"},model:{value:e.formInline.key,callback:function(t){e.$set(e.formInline,"key","string"==typeof t?t.trim():t)},expression:"formInline.key"}})],1),e._v(" "),a("el-form-item",{staticClass:"form-item"},[a("el-button",{attrs:{type:"info"},on:{click:e.query}},[e._v("查询")]),e._v(" "),a("el-button",{attrs:{type:"info"},on:{click:e.clearHandle}},[e._v("清空")])],1)],1)],1),e._v(" "),a("div",{staticClass:"btn-box"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.add}},[e._v("新增")]),e._v(" "),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete"},on:{click:e.del}},[e._v("删除")])],1),e._v(" "),a("el-dialog",{attrs:{title:"提示",visible:e.delTip,width:"20%",top:"30vh"},on:{"update:visible":function(t){e.delTip=t}}},[a("span",[e._v("确定要删除选中的记录？")]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.delTip=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.delConfirm}},[e._v("确 定")])],1)]),e._v(" "),a("div",{staticClass:"tb-box"},[a("el-table",{ref:"dataTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,"header-cell-style":e.rowClass,border:"","max-height":"700"},on:{"selection-change":e.handleSelectionChange,"row-click":e.getRowData}},[a("el-table-column",{attrs:{type:"index",width:"40",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{type:"selection",width:"45",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"pvalue",label:"上级参数值",align:"left",width:"200"}}),e._v(" "),a("el-table-column",{attrs:{prop:"key",label:"参数名",align:"left",width:"350"}}),e._v(" "),a("el-table-column",{attrs:{prop:"value",label:"参数值",align:"left","show-overflow-tooltip":!0}}),e._v(" "),a("el-table-column",{attrs:{prop:"remark",label:"备注",align:"left","show-overflow-tooltip":!0}}),e._v(" "),a("el-table-column",{attrs:{prop:"",label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){e.update(t.$index,t.row)}}},[e._v("修改")])]}}])})],1)],1),e._v(" "),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{"current-page":e.page.currentPage,"page-sizes":[10,30,50],"page-size":e.page.pageSize,total:e.page.total,layout:"total, sizes, prev, pager, next, jumper",background:""},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.switchForm,expression:"switchForm"}],staticClass:"form-section"},[a("div",{staticClass:"panel",domProps:{innerHTML:e._s(e.panelTitle)}}),e._v(" "),a("div",{staticClass:"form-container"},[a("el-form",{ref:"config",attrs:{model:e.config,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"参数名"}},[a("el-input",{attrs:{placeholder:"参数名",disabled:e.tflag},model:{value:e.config.key,callback:function(t){e.$set(e.config,"key",t)},expression:"config.key"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"参数值"}},[a("el-input",{attrs:{placeholder:"参数值"},model:{value:e.config.value,callback:function(t){e.$set(e.config,"value",t)},expression:"config.value"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"父级"}},[a("el-select",{attrs:{placeholder:"请选择..."},model:{value:e.config.pid,callback:function(t){e.$set(e.config,"pid",t)},expression:"config.pid"}},[a("el-option",{attrs:{value:"-1",label:"请选择..."}}),e._v(" "),e._l(e.selectedList,function(e){return a("el-option",{key:e.id,attrs:{label:e.key,value:e.id}})})],2)],1),e._v(" "),a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{attrs:{placeholder:"备注"},model:{value:e.config.remark,callback:function(t){e.$set(e.config,"remark",t)},expression:"config.remark"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("确定")]),e._v(" "),a("el-button",{attrs:{type:"warning"},on:{click:e.reback}},[e._v("返回")])],1)],1)],1)])])},[],!1,null,"ff72d432",null);u.options.__file="index.vue";t.default=u.exports},uKO6:function(e,t,a){"use strict";var n=a("Us4v");a.n(n).a}}]);